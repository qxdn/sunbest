<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
  <meta http-equiv="Content-Type" content="text/html">
  <meta charset="utf-8">
  <base th:href="@{/}">
  <title>节能效果</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <link rel="stylesheet" href="layui/css/layui.css" media="all">
  <script type="text/javascript" src="js/echarts.min.js"></script>
  <script src="layui/layui.js" charset="utf-8"></script>
</head>


<body>
  <!--顶部导航改href-->
  <div class="layui-header">
    <ul class="layui-nav layui-bg-cyan">
      <li class="layui-nav-item "><a href="/"><i class="layui-icon layui-icon-home"></i>首页</a></li>
      <li class="layui-nav-item "><a href="/design/toDesign">天窗设计</a></li>
      <li class="layui-nav-item layui-this"><a href="">节能效果</a></li>
    </ul>
    <ul class="layui-nav layui-bg-cyan layui-layout-right">
      <li class="layui-nav-item "><a sec:authorize="!isAuthenticated()" href="/toLogin">登录</a></li>
      <li class="layui-nav-item "><a sec:authorize="!isAuthenticated()" href="/toRegister">注册</a></li>
      <li class="layui-nav-item "><a sec:authorize="isAuthenticated()" sec:authentication="name" href=""></a></li>
      <li class="layui-nav-item "><a sec:authorize="isAuthenticated()" href="/logout">登出</a></li>
    </ul>
  </div>
  <div layui-main>
    <div style="padding: 20px; background-color: #F2F2F2;">
      <div class="layui-row layui-col-space15">
        <div class="layui-col-md6">
          <div class="layui-card">
            <div class="layui-card-header">输入数据</div>
            <div class="layui-card-body">
              <p>经度:<span th:text="${answer.lon}"></span>°</p>
              <p>纬度:<span th:text="${answer.lat}"></span>°</p>
              <p>设定角度:<span th:text="${answer.userAngle}"></span>°</p>
            </div>
          </div>
        </div>
        <div class="layui-col-md6">
          <div class="layui-card">
            <div class="layui-card-header">计算结果</div>
            <div class="layui-card-body">
              <p>最佳倾角:<span th:text="${#numbers.formatDecimal(answer.bestAngle,1,2)}"></span>°</p>
              <p>年平均发电量:<span th:text="${#numbers.formatDecimal(answer.averagePowerGeneration,1,2)}"></span> kWh/m²/day</p>
              <p>开窗面积:<span th:text="${#numbers.formatDecimal(answer.area,1,2)}"></span>m²</p>
            </div>
          </div>
        </div>
        <div class="layui-col-md12">
          <div class="layui-card">
            <div class="layui-card-header">节能效果</div>
            <div class="layui-card-body">
              <p>节约照明用电:<span th:text="${#numbers.formatDecimal(answer.savePower,1,2)}"></span>kw/h</p>
              <p>年预计发电量:<span th:text="${#numbers.formatDecimal(answer.expectPowerGeneration,1,2)}"></span>°</p>
            </div>
          </div>
        </div>
      </div>
      </div>
    </div>
        <div id="show" style="width: 1500px;height:600px;">

        </div>
    </div>
    <script th:inline="javascript">
      var myChart = echarts.init(document.getElementById('show'));
      var option = {
        title: {
          text: '预期发电效率'
        },
        tooltip: {},
        legend: {
          data: ['最佳发电效率', '当前发电效率']
        },
        xAxis: {
          data: ["1月", "2月", "3月", "4月", "5月", "6月", "7月", "8月", "9月", "10月", "11月", "12月"]
        },
        yAxis: {
          axisLabel: {
            formatter: '{value} (KW*H/Day)'
          }
        },
        series: [{
          name: '最佳发电效率',
          type: 'bar',
          itemStyle: {
            barBorderRadius: 5,
            color: new echarts.graphic.LinearGradient(
              0, 0, 0, 1,
              [
                { offset: 0, color: '#14c8d4' },
                { offset: 1, color: '#43eec6' }
              ]
            )
          },
          data: [[${ answer.bestPower }]]
        }, {
          name: '当前发电效率',
          type: 'bar',
          itemStyle: {
            barBorderRadius: 5,
            color: new echarts.graphic.LinearGradient(
              0, 0, 0, 1,
              [
                { offset: 0, color: '#FF0000' },
                { offset: 1, color: '#000000' }
              ]
            )
          },
          data: [[${ answer.currentPower }]]
        }],
        animationEasing: 'elasticOut',
        animationDelayUpdate: function (idx) {
          return idx * 5;
        }
      };
      myChart.setOption(option);
    </script>
</body>


</html>